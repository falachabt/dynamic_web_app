{% extends 'base.html' %} {% block title %} Students choices {% endblock %} {%
block content %}
<div class='vertical vspaced'>

  <h1>
    Browse Candidates
  </h1>

  <div class='horizontal hspaced'>
    <input type="text" id='search' class='hfill' placeholder="Look up candidates by email or destination"  defaultValue="{{search}}"/>
    <a type='submit' id="search_button">Search</a>
  </div>

  <table>
      <tr>
        <th>Student email</th>
        <th>Preferred destination</th>
      </tr>
      {%for choice in choices %}
      <tr>
        <td>{{ choice[0] }}</td>
        <td>{{ choice[1] }}</td>
      </tr>
      {% endfor %}
  </table>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    var searchButton = document.getElementById("search_button");

    searchButton.addEventListener("click", function () {
      var searchInput = document.getElementById("search").value.trim();
      window.location.href =
        "/choices?search=" + encodeURIComponent(searchInput);
    });
  });
</script>
{% endblock %}
